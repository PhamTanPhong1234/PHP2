define(["jquery"],function($){"use strict";$.widget('mage.addressData',{options:{ajaxUrl:null},_create:function(){this.getTownshipData();},getTownshipData:function(){let self=this,locale=window.locale,townshipData=localStorage.getItem("townshipData"),updateTime=localStorage.getItem("updateTime"),today=new Date().getTime(),updateRange=(24*60*60*1000)*30,flag=false;if((today-updateTime)>updateRange){flag=true;}else if(localStorage.getItem("updateFlag")!=this.options.updateFlag){flag=true;}
if(townshipData==undefined||JSON.parse(townshipData)[locale]==undefined||flag==true){$.getJSON(this.options.ajaxUrl,function(data){if(Object.keys(data).length>0){let result=(townshipData!=null)?JSON.parse(townshipData):{};result[locale]=data.township;localStorage.setItem("townshipData",JSON.stringify(result));localStorage.setItem("updateTime",today);if(self.options.updateFlag!=undefined){localStorage.setItem("updateFlag",self.options.updateFlag);}}});}}});return $.mage.addressData;});